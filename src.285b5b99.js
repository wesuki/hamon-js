parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"D9Nj":[function(require,module,exports) {

},{}],"oMzU":[function(require,module,exports) {
"use strict";function i(i,t){if(!(i instanceof t))throw new TypeError("Cannot call a class as a function")}function t(i,t){for(var e=0;e<t.length;e++){var s=t[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(i,s.key,s)}}function e(i,e,s){return e&&t(i.prototype,e),s&&t(i,s),i}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.StoneConfig=void 0;var s={radius:10,activeColor:"#582520",inactiveColor:"#582520",waveRangeColor:"rgba(127,127,255)",ringWidth:3,successColor:"#ffe19a",indicatorColor:"#cb835599"};exports.StoneConfig=s;var o=function(){function t(e,o,n,a){i(this,t),this.game=e,this.position=o,this.radius=s.radius,this.targetN=n,this.initN=a,this.N=this.initN,this.showRange=!1}return e(t,[{key:"update",value:function(i){}},{key:"draw",value:function(i){i.beginPath(),i.arc(this.position.x,this.position.y,this.radius+s.ringWidth*(this.targetN+1),0,2*Math.PI),i.strokeStyle=s.waveRangeColor,i.setLineDash([5,5]),i.stroke(),i.setLineDash([]);for(var t=this.targetN-this.N+1;t>0;t--)i.beginPath(),i.arc(this.position.x,this.position.y,this.radius+s.ringWidth*t,0,2*Math.PI),i.fillStyle=s.indicatorColor,i.fill();this.N<=this.targetN&&(i.beginPath(),i.arc(this.position.x,this.position.y,this.radius+s.ringWidth,0,2*Math.PI),i.fillStyle=s.successColor,i.fill(),i.beginPath(),i.arc(this.position.x,this.position.y,this.radius+s.ringWidth,0,2*Math.PI),i.strokeStyle=s.waveRangeColor,i.stroke()),i.beginPath(),i.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),i.fillStyle=this.N>0?s.activeColor:s.inactiveColor,i.fill(),0===this.N&&(i.font="12px Arial",i.fillStyle="white",i.textAlign="center",i.fillText("X",this.position.x,this.position.y+4)),this.showRange&&(i.beginPath(),i.arc(this.position.x,this.position.y,this.game.level.waveRange,0,2*Math.PI),i.strokeStyle=s.waveRangeColor,i.setLineDash([5,5]),i.stroke(),i.setLineDash([]))}},{key:"isPointInPath",value:function(i){var t=i.x-this.position.x,e=i.y-this.position.y,s=this.radius;return t*t+e*e<=s*s}},{key:"handleMouseDown",value:function(i){this.showRange=!0,this.mouseDownTime=i.timeStamp}},{key:"handleMouseUp",value:function(i){this.showRange=!1}},{key:"handleClick",value:function(i){console.log("Clicked"),this.N>0&&i.timeStamp<this.mouseDownTime+500&&(this.N=0,this.game.waves.push(this.game.newWaveAt(this.position)))}},{key:"handleWave",value:function(i){this.N+=1}}]),t}();exports.default=o;
},{}],"FQa2":[function(require,module,exports) {
"use strict";function t(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=e(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){u=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(u)throw a}}}}function e(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=function(){function e(t,n,i,o,a){r(this,e),this.game=t,this.position=n,this.speed=i,this.range=o,this.radius=a,this.active=!0}return o(e,[{key:"update",value:function(e){if(this.active){var n,r=this.radius+this.speed*e/1e3,i=t(this.game.stones);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=this.position.x-o.position.x,s=this.position.y-o.position.y,u=a*a+s*s;this.radius*this.radius<u&&r*r>=u&&o.handleWave(this)}}catch(l){i.e(l)}finally{i.f()}this.radius=r,this.radius>this.range&&(this.active=!1)}}},{key:"draw",value:function(t){if(this.active){t.beginPath(),t.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),t.strokeStyle="rgba(127,127,255,".concat(1.1-this.radius/this.range,")");var e=t.lineWidth;t.lineWidth=2,t.stroke(),t.lineWidth=e}}}]),e}();exports.default=a;
},{}],"lhZB":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a=function(){function t(n){e(this,t),this.game=n}return n(t,[{key:"update",value:function(e){}},{key:"draw",value:function(e){e.beginPath(),e.rect(0,0,this.game.gameWidth,this.game.gameHeight),e.fillStyle="#d8e2dc",e.fill()}}]),t}();exports.default=a;
},{}],"gFLk":[function(require,module,exports) {
"use strict";function t(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=n(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,f=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return f=t.done,t},e:function(t){u=!0,i=t},f:function(){try{f||null==r.return||r.return()}finally{if(u)throw i}}}}function n(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function e(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function n(e,o){var a;r(this,n),e.addEventListener("click",function(n){var e,r={x:n.offsetX,y:n.offsetY},a=t(o.stones);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i.isPointInPath(r)){i.handleClick(n);break}}}catch(f){a.e(f)}finally{a.f()}}),e.addEventListener("mousedown",function(n){var e,r={x:n.offsetX,y:n.offsetY},i=t(o.stones);try{for(i.s();!(e=i.n()).done;){var f=e.value;if(f.isPointInPath(r)){f.handleMouseDown(n),a=f;break}}}catch(u){i.e(u)}finally{i.f()}}),e.addEventListener("mouseup",function(t){a&&a.handleMouseUp(t)})};exports.default=o;
},{}],"LDTB":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function n(e,n,l){return n&&t(e.prototype,n),l&&t(e,l),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ShowSolutionController=exports.SelectLevelController=void 0;var l=function(){function t(n){var l=this,o=n.game,i=n.selectElement,s=n.levels;e(this,t),this.selectElement=i,this.game=o,this.levels=s,s.forEach(function(e,t){var n=document.createElement("option");n.value=t,n.text="(".concat(e.difficulty,") ").concat(e.name),i.appendChild(n)}),i.addEventListener("change",function(e){var t=s[e.target.selectedIndex];t&&l.game.setLevel(t)})}return n(t,[{key:"getLevel",value:function(){return this.levels[this.selectElement.value]}},{key:"changeToPrevious",value:function(){var e=this.selectElement.selectedIndex-1;if(0<=e){this.selectElement.selectedIndex=e;var t=new Event("change");this.selectElement.dispatchEvent(t)}else alert("\n      You are at the beginning.\n      There is no previous level.\n      ")}},{key:"changeToNext",value:function(){var e=this.selectElement.selectedIndex+1;if(e<this.selectElement.options.length){this.selectElement.selectedIndex=e;var t=new Event("change");this.selectElement.dispatchEvent(t)}else alert("\n      You are at the end.\n      There is no next level.\n      ")}}]),t}();exports.SelectLevelController=l;var o=function(){function t(n){var l=this,o=n.game,i=n.elements;e(this,t),this.elements=i,this.game=o,this.elements.showSolution.addEventListener("click",function(e){"show"===l.elements.showSolution.value?l.showSolution():l.hideSolution()})}return n(t,[{key:"getLevelBluePrint",value:function(){return this.game.levelBluePrint}},{key:"checkPasscode",value:function(){var e=prompt("Passcode:","[level name as it is]"),t=(null==e?void 0:e.trim())===this.getLevelBluePrint().name.trim();return t||alert("Sorry, wrong passcode."),t}},{key:"showSolution",value:function(){var e=this.getLevelBluePrint(),t="tutorial"===e.difficulty,n=t?"Tutorial":"Solution";if(t||this.checkPasscode()){var l;this.elements.showSolution.value="hide",this.elements.showSolution.innerText="Hide ".concat(n);var o=null!==(l=t?e.tutorial:e.howtosolve)&&void 0!==l?l:"(not found)";this.elements.solutionText.innerText="".concat(n,": ").concat(o)}}},{key:"hideSolution",value:function(){var e="tutorial"===this.getLevelBluePrint().difficulty?"Tutorial":"Solution";this.elements.showSolution.value="show",this.elements.showSolution.innerText="Show ".concat(e),this.elements.solutionText.innerText=null}}]),t}();exports.ShowSolutionController=o;
},{}],"xgvB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildLevel=i,exports.allLevels=exports.levelTiming=exports.levelEquality=exports.levelOrder=exports.levelAlice=exports.levelRT345=exports.levelEcho=exports.levelDual=exports.levelWaveRange=exports.levelNoClick=exports.levelTestSolved=void 0;var e=t(require("/src/stone"));function t(e){return e&&e.__esModule?e:{default:e}}function o(e){return s(e)||r(e)||a(e)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return h(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?h(e,t):void 0}}function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e){if(Array.isArray(e))return h(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function i(t,n){var a=n.stones.map(function(e){return{i:e[0],j:e[1],targetN:e[2],initN:e[3]}}),r=Math.max.apply(Math,o(a.map(function(e){return e.i}))),s=Math.max.apply(Math,o(a.map(function(e){return e.j}))),h=Math.min.apply(Math,o(a.map(function(e){return e.i}))),i=Math.min.apply(Math,o(a.map(function(e){return e.j}))),l=h-2*n.waveSpeed,u=r+2*n.waveSpeed,c=(h+r)/2,v=i-2*n.waveSpeed,p=s+2*n.waveSpeed,d=(i+s)/2,f=t.gameWidth/Math.max(1,u-l),w=t.gameHeight/Math.max(1,p-v),m=Math.min(f,w);return{stones:a.map(function(o){var n=(o.i-c)*m+t.gameWidth/2,a=(o.j-d)*m+t.gameHeight/2;return new e.default(t,{x:n,y:a},o.targetN,o.initN)}),waveRange:n.waveRange*m,waveSpeed:n.waveSpeed*m}}var l={name:"just click",difficulty:"tutorial",tutorial:"\n  Touch (click) the stone to make a wave.\n  ",stones:[[0,0,0,1]],waveRange:2,waveSpeed:1};exports.levelTestSolved=l;var u={name:"no click",difficulty:"tutorial",tutorial:'\n  When there is an "X" on the stone, you can not make a wave from it.\n  ',stones:[[0,0,0,1],[2,0,0,0]],waveRange:1.5,waveSpeed:1};exports.levelNoClick=u;var c={name:"wave range",difficulty:"tutorial",tutorial:"\n  A wave will take away one layer of the stone.\n  Hold to check the wave range.\n  ",stones:[[0,0,0,1],[2,0,1,0]],waveRange:3,waveSpeed:1};exports.levelWaveRange=c;var v={name:"dual",difficulty:"tutorial",tutorial:"\n  Sometimes you need to act before a wave passes.\n  ",howtosolve:"\n    - Touch any stone.\n    - Before the wave arrives at the other stone, touch the other stone.\n    ",stones:[[0,0,1,2],[2,0,1,2]],waveRange:3,waveSpeed:1};exports.levelDual=v;var p={name:"echo",difficulty:"tutorial",tutorial:"\n  A stone restores its layers when you make a wave with it.\n  ",howtosolve:"\n    - Touch the center stone.\n    - After the wave reaches the other two, touch the other stones.\n    ",stones:[[0,0,2,1],[2,0,0,0],[-2,0,0,0]],waveRange:3,waveSpeed:1};exports.levelEcho=p;var d={name:"right triangle",difficulty:"hard",howtosolve:"\n  - Touch the upper left corner stone. \n  - Before the wave reaches the right, touch the right stone.\n  - After the wave passes, touch the bottom stone. \n  - After the wave passes, touch the center stone.\n  ",stones:[[0,0,3,1],[4,0,2,2],[0,3,1,3],[1,1,0,0]],waveRange:4,waveSpeed:1};exports.levelRT345=d;var f={name:"alice",difficulty:"hard",howtosolve:"\n  - Touch the top stone.\n  - After the wave passes, touch the bottom stone. \n  - Before the wave reaches the right, touch the right stone.\n  - After the wave passes, touch the left stone.\n  ",stones:[[2,2,3,1],[5,3,1,3],[3,5,2,2],[0,3,0,0]],waveRange:4,waveSpeed:1};exports.levelAlice=f;var w={difficulty:"medium",name:"order",howtosolve:"\n  Always wait until the current wave fades before proceeding to the next step.\n  - Touch the right bottom stone.\n  - Touch the bottom-left and the top-right stones at the same time.\n  - Touch the top-left stone.\n  - Touch the center stone.\n  ",stones:[[2,2,0,2],[0,0,1,2],[4,0,2,2],[0,4,2,2],[4,4,3,2]],waveRange:4,waveSpeed:1};exports.levelOrder=w;var m={name:"equality",difficulty:"hard",howtosolve:"\n  - Touch all the corner stones.\n  - *After* the first wave passes the center but *befor* the second wave arrives, \n  touch the center stone.\n  ",stones:[[2,2,3,2],[0,0,3,2],[4,0,3,2],[0,4,3,2],[4,4,3,2]],waveRange:5,waveSpeed:.75};exports.levelEquality=m;var g,y={name:"one, two, three",difficulty:"easy",howtosolve:"\n  - Touch the left stone.\n  - After the wave passes, touch the middle stone.\n  - After the wave passes, touch the right stone.\n  ",stones:[[-2,0,1,2],[0,0,1,1],[2,0,0,0]],waveRange:3,waveSpeed:1},x={name:"cross",difficulty:"easy",howtosolve:"\n  - Touch the top and the bottom stones at the same time.\n  - After the waves pass, touch the left and the right stones at the same time.\n  ",stones:[[0,-1,3,3],[1,0,1,0],[0,1,3,3],[-1,0,1,0]],waveRange:3,waveSpeed:1},T={name:"7th",difficulty:"medium",howtosolve:"\n  Always wait until the current wave fades before proceeding to the next step.\n  - Touch the top-left stone.\n  - Touch the mid-left stone.\n  - Touch the top-mid stone.\n  - Touch the bottom-mid stone.\n  - Touch the center stone.\n  - Touch the bottom-left stone.\n  ",stones:[[0,0,2,2],[1,0,1,1],[2,0,1,0],[0,1,2,2],[1,1,0,0],[2,1,1,0],[0,2,0,0],[1,2,2,2],[2,2,1,0]],waveRange:1,waveSpeed:.75},b={difficulty:"easy",name:"chit-chat",howtosolve:"\n  Always wait until the current wave(s) fade before proceeding to the next step.\n  - Touch the center stone and the left stone.\n  - Touch the center stone and the bottom stone.\n  - Touch the center stone and the right stone.\n  - Touch the center stone and the top stone.\n  ",stones:[[0,0,1,1],[-2,0,4,1],[0,2,3,0],[2,0,2,0],[0,-2,1,0]],waveRange:2.5,waveSpeed:1},S={name:"timing",difficulty:"medium",howtosolve:"\n  - Touch the middle stone to make the left and the right touchable.\n  - Touch the left stone.\n  - After the wave arrives at the middle stone, but before it arrives the right, touch the middle and the right stone at the same time.\n  ",remark:"\n  This is the simplest puzzle requires complex timed moves to solve.\n  ",stones:[[0,0,2,0],[1,0,1,1],[3,0,2,0]],waveRange:3,waveSpeed:1};exports.levelTiming=S;var A=[].concat(g?[g]:[],[l,u,c,v,p,y,x,b,w,T,S,f,d,m]);exports.allLevels=A;
},{"/src/stone":"oMzU"}],"HPsM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("/src/stone"),t=a(require("/src/wave")),n=a(require("/src/background")),i=a(require("/src/input")),r=require("/src/controllers"),s=require("/src/levels");function a(e){return e&&e.__esModule?e:{default:e}}function l(e){return c(e)||h(e)||u(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function h(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e){if(Array.isArray(e))return v(e)}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var g={Menu:0,Running:1,Paused:2,GameOver:3},p=function(){function a(e){var t=this;f(this,a);var l={};l[g.GameOver]=this.prepareGameOver,this.prepareFunctions=l;var o={};o[g.Running]=this.updateRunning,o[g.GameOver]=this.updateGameOver,this.updateFunctions=o;var u={};u[g.Running]=this.drawRunning,u[g.GameOver]=this.drawGameOver,this.drawFunctions=u,this.elements=e,this.gameWidth=this.elements.canvas.width,this.gameHeight=this.elements.canvas.height,this.gameObjects=[],this.gameObjects.push(new n.default(this)),this.inputHandler=new i.default(this.elements.canvas,this),this.selectLevelMenuController=new r.SelectLevelController({game:this,selectElement:this.elements.selectLevel,levels:s.allLevels}),this.elements.resetLevel.addEventListener("click",function(e){t.resetCurrentLevel()}),this.elements.previousLevel.addEventListener("click",function(e){t.selectLevelMenuController.changeToPrevious()}),this.elements.nextLevel.addEventListener("click",function(e){t.selectLevelMenuController.changeToNext()}),this.showSolutionController=new r.ShowSolutionController({game:this,elements:e}),this.setLevel(this.selectLevelMenuController.getLevel())}return m(a,[{key:"setLevel",value:function(e){this.levelBluePrint=e,this.resetCurrentLevel()}},{key:"resetCurrentLevel",value:function(){this.level=(0,s.buildLevel)(this,this.levelBluePrint),this.stones=this.level.stones,this.waves=[],"tutorial"===this.levelBluePrint.difficulty?this.showSolutionController.showSolution():this.showSolutionController.hideSolution(),this.setGameState(g.Running)}},{key:"setGameState",value:function(e){e!==this.gameState&&(this.gameState=e,this.prepare=this.prepareFunctions[this.gameState],this.prepare&&this.prepare(),this.update=this.updateFunctions[this.gameState],this.draw=this.drawFunctions[this.gameState])}},{key:"prepareGameOver",value:function(){this.solved=this.isSolved()}},{key:"updateGameOver",value:function(e){}},{key:"drawGameOver",value:function(e){[].concat(l(this.gameObjects),l(this.stones)).forEach(function(t){t.draw(e)}),e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0.5,0.5,0.5,0.5)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center";var t=this.solved?"Solved!":"Out of Move";e.fillText(t,this.gameWidth/2,this.gameHeight/2)}},{key:"updateRunning",value:function(e){[].concat(l(this.gameObjects),l(this.stones),l(this.waves)).forEach(function(t){t.update(e)}),this.waves=this.waves.filter(function(e){return e.active}),this.isSolved()&&this.setGameState(g.GameOver)}},{key:"drawRunning",value:function(e){[].concat(l(this.gameObjects),l(this.stones),l(this.waves)).forEach(function(t){t.draw(e)})}},{key:"isSolved",value:function(){var e;return 0===this.waves.length&&(null===(e=this.stones)||void 0===e?void 0:e.every(function(e){return e.N===e.targetN}))}},{key:"newWaveAt",value:function(n){return new t.default(this,n,this.level.waveSpeed,this.level.waveRange,e.StoneConfig.radius)}}]),a}();exports.default=p;
},{"/src/stone":"oMzU","/src/wave":"FQa2","/src/background":"lhZB","/src/input":"gFLk","/src/controllers":"LDTB","/src/levels":"xgvB"}],"H99C":[function(require,module,exports) {
"use strict";require("./styles.css");var e=n(require("/src/game"));function n(e){return e&&e.__esModule?e:{default:e}}document.getElementById("app").innerHTML='\n<div class="container">\n<span class="title">Hamon</span>\n<span class="version">v'.concat("0.3.1","+").concat("877e470",'</span>\n</div>\n<div>\n  Touch stones. Make waves. Make every stone shine.\n</div>\n<br/>\n<div>\n  Current Level:\n  <select id="selectLevel"></select>\n  <button id="previousLevel">Previous Level</button>\n  <button id="resetLevel">Reset Level</button>\n  <button id="nextLevel">Next Level</button>\n</div>\n<div>\n</div>\n<div>\n  <canvas id="gameScreen"></canvas>\n</div>\n<div>\n  <button id="showSolution">Show Solution</button>\n  <div id="solutionText"></div>\n</div>\n');var t=document.getElementById("gameScreen");t.width=600,t.height=600;var i=t.getContext("2d"),o={canvas:t,selectLevel:document.getElementById("selectLevel"),resetLevel:document.getElementById("resetLevel"),nextLevel:document.getElementById("nextLevel"),previousLevel:document.getElementById("previousLevel"),showSolution:document.getElementById("showSolution"),solutionText:document.getElementById("solutionText")},s=new e.default(o);function v(){var e;requestAnimationFrame(function n(o){if(void 0!==o){if(void 0!==e){var v=o-e;i.clearRect(0,0,t.width,t.height),s.update(v)}e=o,s.draw(i)}requestAnimationFrame(n)})}v();
},{"./styles.css":"D9Nj","/src/game":"HPsM"}]},{},["H99C"], null)
//# sourceMappingURL=src.285b5b99.js.map